<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snippet War</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
        .slide-enter-active, .slide-leave-active {
            transition: transform 0.3s ease;
        }
        .slide-enter-from {
            transform: translateX(100%);
        }
        .slide-leave-to {
            transform: translateX(-100%);
        }
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .code-block {
            background-color: #2d3748;
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div id="app" class="max-w-md mx-auto min-h-screen bg-gray-900">
        <!-- Header -->
        <div class="bg-gradient-to-r from-purple-600 to-blue-600 p-4 shadow-lg">
            <div class="flex items-center justify-between">
                <h1 class="text-xl font-bold">Snippet War</h1>
                <div v-if="gameState === 'playing'" class="flex items-center space-x-2">
                    <i class="fas fa-trophy text-yellow-400"></i>
                    <span class="font-bold">{{ score }}</span>
                </div>
            </div>
        </div>

        <!-- Welcome Screen -->
        <div v-if="gameState === 'welcome'" class="p-4">
            <div class="text-center py-8">
                <div class="text-6xl mb-4">‚öîÔ∏è</div>
                <h2 class="text-2xl font-bold mb-2">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <p class="text-gray-400 mb-8">–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è</p>

                <button @click="gameState = 'setup'" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 w-full">
                    –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                </button>
            </div>
        </div>

        <!-- Setup Screen -->
        <div v-else-if="gameState === 'setup'" class="p-4">
            <div class="mb-6">
                <h2 class="text-xl font-bold mb-4">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h2>

                <!-- Language Selection -->
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button
                            v-for="lang in languages"
                            :key="lang.value"
                            @click="selectedLanguage = lang.value"
                            :class="[
                                'p-3 rounded-lg border transition duration-200',
                                selectedLanguage === lang.value
                                    ? 'bg-purple-600 border-purple-500 text-white'
                                    : 'bg-gray-800 border-gray-700 text-gray-300'
                            ]"
                        >
                            {{ lang.name }}
                        </button>
                    </div>
                </div>

                <!-- Topic Selection -->
                <div class="mb-6" v-if="selectedLanguage">
                    <label class="block text-sm font-medium mb-2">–¢–µ–º–∞</label>
                    <div class="space-y-2 max-h-40 overflow-y-auto">
                        <button
                            v-for="topic in getTopicsForLanguage(selectedLanguage)"
                            :key="topic.ID"
                            @click="selectedTopic = topic.ID"
                            :class="[
                                'w-full text-left p-3 rounded-lg border transition duration-200',
                                selectedTopic === topic.ID
                                    ? 'bg-purple-600 border-purple-500 text-white'
                                    : 'bg-gray-800 border-gray-700 text-gray-300'
                            ]"
                        >
                            {{ topic.Name }}
                        </button>
                    </div>
                </div>

                <!-- Difficulty Selection -->
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">–°–ª–æ–∂–Ω–æ—Å—Ç—å</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button
                            v-for="diff in difficulties"
                            :key="diff.value"
                            @click="selectedDifficulty = diff.value"
                            :class="[
                                'p-3 rounded-lg border transition duration-200',
                                selectedDifficulty === diff.value
                                    ? 'bg-purple-600 border-purple-500 text-white'
                                    : 'bg-gray-800 border-gray-700 text-gray-300'
                            ]"
                        >
                            {{ diff.name }}
                        </button>
                    </div>
                </div>
            </div>

            <button
                @click="startGame"
                :disabled="!selectedLanguage || !selectedTopic || !selectedDifficulty"
                :class="[
                    'w-full py-3 px-6 rounded-full font-bold shadow-lg transition duration-300',
                    selectedLanguage && selectedTopic && selectedDifficulty
                        ? 'bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white'
                        : 'bg-gray-700 text-gray-500 cursor-not-allowed'
                ]"
            >
                –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
            </button>
        </div>

        <!-- Game Screen -->
        <div v-else-if="gameState === 'playing'" class="p-4">
            <div v-if="currentQuestion">
                <!-- Progress -->
                <div class="mb-4">
                    <div class="flex justify-between text-sm text-gray-400 mb-1">
                        <span>–í–æ–ø—Ä–æ—Å {{ questionCount }}</span>
                        <span>{{ timeLeft }} —Å–µ–∫</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div
                            class="bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-300"
                            :style="{ width: `${(timeLeft / 30) * 100}%` }"
                        ></div>
                    </div>
                </div>

                <!-- Question -->
                <div class="bg-gray-800 rounded-xl p-4 mb-4 shadow-lg">
                    <h3 class="text-lg font-semibold mb-3">{{ currentQuestion.question }}</h3>

                    <!-- Code Block -->
                    <div class="code-block mb-4">
                        <pre class="text-green-400 text-sm">{{ currentQuestion.code }}</pre>
                    </div>

                    <!-- Answer Options -->
                    <div v-if="currentQuestion.question_type === 'multiple_choice'">
                        <div
                            v-for="(option, index) in currentQuestion.options"
                            :key="index"
                            @click="selectAnswer(option)"
                            :class="[
                                'p-3 mb-2 rounded-lg border cursor-pointer transition duration-200',
                                selectedAnswer === option
                                    ? 'bg-purple-600 border-purple-500'
                                    : 'bg-gray-700 border-gray-600 hover:bg-gray-600'
                            ]"
                        >
                            {{ option }}
                        </div>
                    </div>

                    <!-- Free Text Input -->
                    <div v-else>
                        <input
                            v-model="freeTextAnswer"
                            type="text"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."
                            class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500"
                            @keyup.enter="submitFreeTextAnswer"
                        >
                    </div>

                    <!-- Submit Button for Free Text -->
                    <button
                        v-if="currentQuestion.question_type === 'free_text'"
                        @click="submitFreeTextAnswer"
                        :disabled="!freeTextAnswer.trim()"
                        :class="[
                            'w-full mt-3 py-2 rounded-lg font-medium transition duration-200',
                            freeTextAnswer.trim()
                                ? 'bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white'
                                : 'bg-gray-700 text-gray-500 cursor-not-allowed'
                        ]"
                    >
                        –û—Ç–≤–µ—Ç–∏—Ç—å
                    </button>
                </div>
            </div>

            <!-- Loading State -->
            <div v-else class="flex justify-center items-center h-64">
                <div class="text-center">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞...</p>
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div v-else-if="gameState === 'result'" class="p-4">
            <div class="text-center py-8">
                <div class="text-6xl mb-4" v-if="isCorrect">üéâ</div>
                <div class="text-6xl mb-4" v-else>‚ùå</div>

                <h2 class="text-2xl font-bold mb-2" v-if="isCorrect">–ü—Ä–∞–≤–∏–ª—å–Ω–æ!</h2>
                <h2 class="text-2xl font-bold mb-2" v-else>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ</h2>

                <div class="bg-gray-800 rounded-xl p-4 mb-6">
                    <p class="mb-3">{{ currentQuestion.explanation }}</p>
                    <div class="text-sm text-gray-400">
                        –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <span class="text-green-400 font-mono">{{ currentQuestion.correct_answer }}</span>
                    </div>
                </div>

                <button
                    @click="loadNextQuestion"
                    class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 w-full"
                >
                    –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="p-4 text-center text-gray-500 text-sm">
            <p>Snippet War - –ø—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è</p>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    gameState: 'welcome', // welcome, setup, playing, result
                    score: 0,
                    questionCount: 1,
                    timeLeft: 30,
                    timer: null,

                    // Setup data
                    selectedLanguage: '',
                    selectedTopic: '',
                    selectedDifficulty: '',

                    // Question data
                    currentQuestion: null,
                    selectedAnswer: '',
                    freeTextAnswer: '',
                    isCorrect: false,

                    // Static data
                    languages: [
                        { value: 'python', name: 'Python' },
                        { value: 'javascript', name: 'JavaScript' },
                        { value: 'go', name: 'Go' },
                        { value: 'java', name: 'Java' },
                        { value: 'cpp', name: 'C++' },
                        { value: 'rust', name: 'Rust' },
                        { value: 'typescript', name: 'TypeScript' }
                    ],

                    difficulties: [
                        { value: 'beginner', name: '–ù–æ–≤–∏—á–æ–∫' },
                        { value: 'intermediate', name: '–°—Ä–µ–¥–Ω–∏–π' },
                        { value: 'advanced', name: '–≠–∫—Å–ø–µ—Ä—Ç' }
                    ],

                    topics: {
                        python: [
                            { ID: "variables_types", Name: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö" },
                            { ID: "lists_arrays", Name: "–°–ø–∏—Å–∫–∏ –∏ –º–∞—Å—Å–∏–≤—ã" },
                            { ID: "dictionaries", Name: "–°–ª–æ–≤–∞—Ä–∏" },
                            { ID: "functions", Name: "–§—É–Ω–∫—Ü–∏–∏" },
                            { ID: "closures", Name: "–ó–∞–º—ã–∫–∞–Ω–∏—è" },
                            { ID: "decorators", Name: "–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã" },
                            { ID: "generators", Name: "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã" },
                            { ID: "classes_oop", Name: "–ö–ª–∞—Å—Å—ã –∏ –û–û–ü" },
                            { ID: "exceptions", Name: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π" },
                            { ID: "context_managers", Name: "–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã" },
                            { ID: "async_await", Name: "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ" }
                        ],
                        javascript: [
                            { ID: "variables_types", Name: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã" },
                            { ID: "arrays", Name: "–ú–∞—Å—Å–∏–≤—ã" },
                            { ID: "objects", Name: "–û–±—ä–µ–∫—Ç—ã" },
                            { ID: "functions", Name: "–§—É–Ω–∫—Ü–∏–∏" },
                            { ID: "closures", Name: "–ó–∞–º—ã–∫–∞–Ω–∏—è" },
                            { ID: "this_binding", Name: "–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (this)" },
                            { ID: "prototypes", Name: "–ü—Ä–æ—Ç–æ—Ç–∏–ø—ã" },
                            { ID: "classes", Name: "–ö–ª–∞—Å—Å—ã (ES6+)" },
                            { ID: "promises_async", Name: "–ü—Ä–æ–º–∏—Å—ã –∏ async/await" },
                            { ID: "event_loop", Name: "Event Loop" },
                            { ID: "destructuring", Name: "–î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è" },
                            { ID: "modules", Name: "–ú–æ–¥—É–ª–∏ (ES6+)" }
                        ],
                        go: [
                            { ID: "variables_types", Name: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã" },
                            { ID: "slices", Name: "–°—Ä–µ–∑—ã" },
                            { ID: "maps", Name: "–ú–∞–ø—ã" },
                            { ID: "functions", Name: "–§—É–Ω–∫—Ü–∏–∏" },
                            { ID: "methods", Name: "–ú–µ—Ç–æ–¥—ã" },
                            { ID: "interfaces", Name: "–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã" },
                            { ID: "goroutines", Name: "–ì–æ—Ä—É—Ç–∏–Ω—ã" },
                            { ID: "channels", Name: "–ö–∞–Ω–∞–ª—ã" },
                            { ID: "select", Name: "Select statement" },
                            { ID: "defer_panic_recover", Name: "Defer, panic, recover" },
                            { ID: "pointers", Name: "–£–∫–∞–∑–∞—Ç–µ–ª–∏" },
                            { ID: "structs", Name: "–°—Ç—Ä—É–∫—Ç—É—Ä—ã" }
                        ],
                        java: [
                            { ID: "variables_types", Name: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã" },
                            { ID: "arrays_lists", Name: "–ú–∞—Å—Å–∏–≤—ã –∏ —Å–ø–∏—Å–∫–∏" },
                            { ID: "collections", Name: "–ö–æ–ª–ª–µ–∫—Ü–∏–∏ (Set, Map)" },
                            { ID: "methods", Name: "–ú–µ—Ç–æ–¥—ã" },
                            { ID: "classes_objects", Name: "–ö–ª–∞—Å—Å—ã –∏ –æ–±—ä–µ–∫—Ç—ã" },
                            { ID: "inheritance", Name: "–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ" },
                            { ID: "interfaces", Name: "–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã" },
                            { ID: "generics", Name: "–î–∂–µ–Ω–µ—Ä–∏–∫–∏" },
                            { ID: "exceptions", Name: "–ò—Å–∫–ª—é—á–µ–Ω–∏—è" },
                            { ID: "streams", Name: "Streams API" },
                            { ID: "lambda_expressions", Name: "Lambda –≤—ã—Ä–∞–∂–µ–Ω–∏—è" },
                            { ID: "concurrency", Name: "–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å" }
                        ],
                        cpp: [
                            { ID: "variables_types", Name: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã" },
                            { ID: "pointers_references", Name: "–£–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ —Å—Å—ã–ª–∫–∏" },
                            { ID: "arrays_vectors", Name: "–ú–∞—Å—Å–∏–≤—ã –∏ –≤–µ–∫—Ç–æ—Ä—ã" },
                            { ID: "functions", Name: "–§—É–Ω–∫—Ü–∏–∏" },
                            { ID: "classes_objects", Name: "–ö–ª–∞—Å—Å—ã –∏ –æ–±—ä–µ–∫—Ç—ã" },
                            { ID: "inheritance", Name: "–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ" },
                            { ID: "templates", Name: "–®–∞–±–ª–æ–Ω—ã" },
                            { ID: "smart_pointers", Name: "–£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏" },
                            { ID: "stl", Name: "STL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã" },
                            { ID: "move_semantics", Name: "Move —Å–µ–º–∞–Ω—Ç–∏–∫–∞" },
                            { ID: "lambda", Name: "Lambda –≤—ã—Ä–∞–∂–µ–Ω–∏—è" },
                            { ID: "multithreading", Name: "–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å" }
                        ],
                        rust: [
                            { ID: "variables_types", Name: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã" },
                            { ID: "ownership", Name: "–í–ª–∞–¥–µ–Ω–∏–µ (ownership)" },
                            { ID: "borrowing", Name: "–ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ (borrowing)" },
                            { ID: "lifetimes", Name: "–í—Ä–µ–º—è –∂–∏–∑–Ω–∏" },
                            { ID: "vectors", Name: "–í–µ–∫—Ç–æ—Ä—ã" },
                            { ID: "hashmaps", Name: "HashMap" },
                            { ID: "functions", Name: "–§—É–Ω–∫—Ü–∏–∏" },
                            { ID: "structs", Name: "–°—Ç—Ä—É–∫—Ç—É—Ä—ã" },
                            { ID: "enums", Name: "–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è" },
                            { ID: "pattern_matching", Name: "–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –æ–±—Ä–∞–∑—Ü–æ–º" },
                            { ID: "error_handling", Name: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (Result, Option)" },
                            { ID: "concurrency", Name: "–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å" }
                        ],
                        typescript: [
                            { ID: "types", Name: "–¢–∏–ø—ã" },
                            { ID: "interfaces", Name: "–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã" },
                            { ID: "generics", Name: "–î–∂–µ–Ω–µ—Ä–∏–∫–∏" },
                            { ID: "unions_intersections", Name: "–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Ç–∏–ø–æ–≤" },
                            { ID: "type_guards", Name: "–ó–∞—â–∏—Ç–Ω–∏–∫–∏ —Ç–∏–ø–æ–≤" },
                            { ID: "decorators", Name: "–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã" },
                            { ID: "utility_types", Name: "–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ç–∏–ø—ã" },
                            { ID: "modules", Name: "–ú–æ–¥—É–ª–∏" },
                            { ID: "async_promises", Name: "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å" },
                            { ID: "classes", Name: "–ö–ª–∞—Å—Å—ã" },
                            { ID: "namespaces", Name: "–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω" }
                        ]
                    }
                };
            },

            methods: {
                getTopicsForLanguage(language) {
                    return this.topics[language] || [];
                },

                startGame() {
                    this.gameState = 'playing';
                    this.score = 0;
                    this.questionCount = 1;
                    this.loadQuestion();
                },

                async loadQuestion() {
                    this.currentQuestion = null;
                    this.selectedAnswer = '';
                    this.freeTextAnswer = '';

                    // Random question type
                    const questionTypes = ['multiple_choice', 'free_text'];
                    const randomQuestionType = questionTypes[Math.floor(Math.random() * questionTypes.length)];

                    try {
                        const response = await fetch('https://snippet-war.casnerano.tech/api/questions/generate', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                language: this.selectedLanguage,
                                topic: this.selectedTopic,
                                difficulty: this.selectedDifficulty,
                                question_type: randomQuestionType
                            })
                        });

                        if (response.ok) {
                            this.currentQuestion = await response.json();
                            this.startTimer();
                        } else {
                            console.error('Failed to load question');
                            // Fallback to mock data for demo
                            this.loadMockQuestion(randomQuestionType);
                        }
                    } catch (error) {
                        console.error('Error loading question:', error);
                        // Fallback to mock data for demo
                        this.loadMockQuestion(randomQuestionType);
                    }
                },

                loadMockQuestion(questionType) {
                    if (questionType === 'multiple_choice') {
                        this.currentQuestion = {
                            id: "mock-1",
                            language: this.selectedLanguage,
                            topic: this.selectedTopic,
                            difficulty: this.selectedDifficulty,
                            question_type: "multiple_choice",
                            code: "package main\n\nimport \"fmt\"\n\nfunc main() {\n    var a int = 10\n    var b int = 20\n    var c = a + b\n    var d = \"Result: \" + fmt.Sprint(c)\n    fmt.Println(d)\n}",
                            question: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥?",
                            options: [
                                "Result: 30",
                                "Result: 1020",
                                "30",
                                "Result: a + b"
                            ],
                            correct_answer: "Result: 30",
                            explanation: "–í —ç—Ç–æ–º –∫–æ–¥–µ –æ–±—ä—è–≤–ª–µ–Ω—ã —Ç—Ä–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: a –∏ b —Ç–∏–ø–∞ int, –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏—Å–≤–æ–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è 10 –∏ 20 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –î–∞–ª–µ–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å—É–º–º–∞ a + b –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é c (30). –ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ d, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç \"Result: \" –∏ –∫ –Ω–µ–π –∫–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É–µ—Ç—Å—è —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ c, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–æ–µ –≤ —Å—Ç—Ä–æ–∫—É —Å –ø–æ–º–æ—â—å—é fmt.Sprint. –í –∏—Ç–æ–≥–µ –Ω–∞ —ç–∫—Ä–∞–Ω –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ \"Result: 30\"."
                        };
                    } else {
                        this.currentQuestion = {
                            id: "mock-2",
                            language: this.selectedLanguage,
                            topic: this.selectedTopic,
                            difficulty: this.selectedDifficulty,
                            question_type: "free_text",
                            code: "package main\n\nimport \"fmt\"\n\nfunc main() {\n\tvar a int = 10\n\tvar b float64 = 3.5\n\tc := float64(a) + b\n\tfmt.Println(c)\n}",
                            question: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥?",
                            correct_answer: "13.5",
                            acceptable_variants: [
                                "13.5",
                                "13.50",
                                "13.500000"
                            ],
                            explanation: "–í —ç—Ç–æ–º –∫–æ–¥–µ –æ–±—ä—è–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤: a —Ç–∏–ø–∞ int –∏ b —Ç–∏–ø–∞ float64. –î–ª—è —Å–ª–æ–∂–µ–Ω–∏—è —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é a –Ω—É–∂–Ω–æ —è–≤–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ float64, –∏–Ω–∞—á–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É. –ü–æ—Å–ª–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è a –∫ float64 –∏ —Å–ª–æ–∂–µ–Ω–∏—è —Å b –ø–æ–ª—É—á–∞–µ—Ç—Å—è 13.5, —á—Ç–æ –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω."
                        };
                    }
                    this.startTimer();
                },

                startTimer() {
                    this.timeLeft = 30;
                    clearInterval(this.timer);
                    this.timer = setInterval(() => {
                        this.timeLeft--;
                        if (this.timeLeft <= 0) {
                            clearInterval(this.timer);
                            this.submitAnswer(null);
                        }
                    }, 1000);
                },

                selectAnswer(answer) {
                    this.selectedAnswer = answer;
                    this.submitAnswer(answer);
                },

                submitFreeTextAnswer() {
                    if (this.freeTextAnswer.trim()) {
                        this.submitAnswer(this.freeTextAnswer.trim());
                    }
                },

                submitAnswer(answer) {
                    clearInterval(this.timer);

                    if (!this.currentQuestion) return;

                    let correct = false;

                    if (this.currentQuestion.question_type === 'multiple_choice') {
                        correct = answer === this.currentQuestion.correct_answer;
                    } else {
                        // Check against correct answer and acceptable variants
                        const userAnswer = answer ? answer.toLowerCase().trim() : '';
                        const correctAnswer = this.currentQuestion.correct_answer.toLowerCase().trim();
                        const acceptableVariants = this.currentQuestion.acceptable_variants || [];

                        correct = userAnswer === correctAnswer ||
                                 acceptableVariants.some(variant =>
                                     userAnswer === variant.toLowerCase().trim()
                                 );
                    }

                    this.isCorrect = correct;

                    if (correct) {
                        this.score++;
                    }

                    this.gameState = 'result';
                },

                loadNextQuestion() {
                    this.questionCount++;
                    this.gameState = 'playing';
                    this.loadQuestion();
                }
            },

            mounted() {
                // Initialize Telegram WebApp if available
                if (window.Telegram && window.Telegram.WebApp) {
                    window.Telegram.WebApp.ready();
                    window.Telegram.WebApp.expand();
                }
            }
        }).mount('#app');
    </script>
</body>
</html>